<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Christmas Tree - Single File</title>
<style>
  :root{
    --max-w:1620px;
    --max-h:2160px;
  }
  html,body{
    height:100%;
    margin:0;
    font-family: Inter, system-ui, Arial, sans-serif;
    background:#000;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }
  .stage {
    position:relative;
    width:100%;
    height:100dvh;
    max-width:var(--max-w);
    max-height:var(--max-h);
    margin:0 auto;
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
    touch-action:manipulation;
    user-select:none;
  }
  video.bg {
    max-width:100%;
    max-height:100%;
    object-fit:contain;
    display:block;
    border-radius:12px;
  }
  .ornament {
    position:absolute;
    transform:translate(-50%,-50%);
    width:48px;
    height:48px;
    cursor:pointer;
    z-index:30;
    pointer-events:auto;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .ornament .glow{
    position:absolute;
    width:48px;
    height:48px;
    border-radius:50%;
    background: radial-gradient(circle, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0) 65%);
    filter:blur(10px);
    opacity:0.8;
  }
  @keyframes floatA { 0% { transform: translate(-50%,-50%) translateY(0) rotate(-2deg); } 50% { transform: translate(-50%,-56%) translateY(-6px) rotate(2deg);} 100% { transform: translate(-50%,-50%) translateY(0) rotate(-2deg);} }
  @keyframes floatB { 0% { transform: translate(-50%,-50%) translateY(0) rotate(-2deg); } 50% { transform: translate(-50%,-54%) translateY(-4px) rotate(2deg);} 100% { transform: translate(-50%,-50%) translateY(0) rotate(-2deg);} }
  @keyframes glowPulse { 0% { opacity:.4; transform:scale(1); } 50% { opacity:1; transform:scale(1.25);} 100% { opacity:.4; transform:scale(1);} }
  .ornament[data-idx="0"]{ animation: floatA 2.0s ease-in-out infinite; animation-delay:0s; }
  .ornament[data-idx="1"]{ animation: floatB 2.4s ease-in-out infinite; animation-delay:0.06s; }
  .ornament[data-idx="2"]{ animation: floatA 2.6s ease-in-out infinite; animation-delay:0.12s; }
  .ornament[data-idx="3"]{ animation: floatB 2.2s ease-in-out infinite; animation-delay:0.18s; }
  .ornament[data-idx="4"]{ animation: floatA 2.8s ease-in-out infinite; animation-delay:0.24s; }
  .ornament[data-idx="5"]{ animation: floatB 2.1s ease-in-out infinite; animation-delay:0.30s; }
  .ornament[data-idx="6"]{ animation: floatA 2.3s ease-in-out infinite; animation-delay:0.36s; }
  .ornament .glow { animation: glowPulse 2.4s infinite; }
  .dialog {
    position:absolute;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    width:min(520px, 92%);
    z-index:70;
    pointer-events:auto;
    display:none;
  }
  .dialog.active { display:block; }
  .dialog .close {
    position:absolute;
    right:10px; top:10px;
    background:rgba(0,0,0,0.65);
    color:#fff;
    border:none;
    width:30px;height:30px;border-radius:50%;
    display:flex;align-items:center;justify-content:center;
    cursor:pointer; z-index:90;
  }
  .dialog video {
    width:100%;
    height:auto;
    display:block;
    border-radius:12px;
    box-shadow:0 8px 30px rgba(0,0,0,0.6);
  }
  .dialog .message {
    position:absolute;
    inset:0;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    text-align:center;
    font-weight:700;
    font-size:20px;
    pointer-events:none;
    color:#000;
    z-index:85;
    line-height:1.05;
  }
  .snow {
    position:absolute;
    inset:0;
    z-index:120;
    pointer-events:none;
    overflow:hidden;
  }
  .flake {
    position:absolute;
    top:-10%;
    background:white;
    border-radius:50%;
    opacity:0.85;
    filter:drop-shadow(0 0 6px rgba(255,255,255,0.6));
    animation-name:fall;
    animation-timing-function:linear;
    animation-iteration-count:infinite;
  }
  @keyframes fall {
    0% { transform: translateY(-10vh); opacity:0; }
    10% { opacity:1; }
    100% { transform: translateY(120vh); opacity:0.85; }
  }
  canvas.fireworks {
    position:absolute;
    left:0; top:0;
    width:100%;
    height:100%;
    pointer-events:none;
    z-index:50;
  }
</style>
</head>
<body>
<div class="stage" id="stage">
  <div class="snow" id="snow"></div>
  <video class="bg" id="bgVideo" src="https://res.cloudinary.com/ddcbvgrxw/video/upload/v1765263461/Hailuo_Video_chuy%E1%BB%83n_%E1%BA%A3nh_th%C3%A0nh_video_c%C3%B3_%C4%91%E1%BB%99_d_454689996606468096_wcpwdc.mp4" autoplay muted loop playsinline></video>
  <div class="ornament" data-id="1" data-idx="0" style="left:48%; top:14%;"><div class="glow"></div></div>
  <div class="ornament" data-id="2" data-idx="1" style="left:47%; top:28%;"><div class="glow"></div></div>
  <div class="ornament" data-id="3" data-idx="2" style="left:57%; top:40%;"><div class="glow"></div></div>
  <div class="ornament" data-id="4" data-idx="3" style="left:33%; top:48%;"><div class="glow"></div></div>
  <div class="ornament" data-id="5" data-idx="4" style="left:65%; top:58%;"><div class="glow"></div></div>
  <div class="ornament" data-id="6" data-idx="5" style="left:24%; top:64%;"><div class="glow"></div></div>
  <div class="ornament" data-id="7" data-idx="6" style="left:44%; top:64%;"><div class="glow"></div></div>

  <div class="dialog" id="dialog">
    <button class="close" id="closeBtn">✕</button>
    <canvas class="fireworks" id="fwCanvas"></canvas>
    <video id="popupVideo" src="https://res.cloudinary.com/ddcbvgrxw/video/upload/v1765272670/1209_djpeju.mp4" autoplay muted loop playsinline></video>
    <div class="message" id="dialogMessage"></div>
  </div>
</div>

<script>
const messages = [
  ["Bạn đã trúng","01 gối Kymdan","PressureFree Air"],
  ["Bạn đã trúng","01 gối Kymdan","Glory Air"],
  ["Bạn đã trúng","01 gối Kymdan","PressureFree Max"],
  ["Bạn đã trúng","01 gối Kymdan","PressureFree Plus"],
  ["Bạn đã trúng","01 bộ ga Kymdan","Lavish Prime"],
  ["Bạn đã trúng","01 bộ ga Kymdan","Serenity"],
  ["Bạn đã trúng","01 mền chăn Kymdan","SleepCool"],
];
const ornaments=document.querySelectorAll('.ornament');
const dialog=document.getElementById('dialog');
const dialogMessage=document.getElementById('dialogMessage');
const closeBtn=document.getElementById('closeBtn');
let autoStopTimer=null;

ornaments.forEach(o=>{
  o.onclick=()=>{
    const id=parseInt(o.dataset.id);
    openDialog(id);
  };
});

function openDialog(id){
  dialog.classList.add('active');
  const m=messages[id-1];
  dialogMessage.innerHTML=m.join("<br>");
}

closeBtn.onclick=()=>dialog.classList.remove('active');
</script>
</body>
</html>
